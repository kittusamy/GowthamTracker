SET FOREIGN_KEY_CHECKS=0;
DROP TABLE IF EXISTS EFFORTS_TB;
DROP TABLE IF EXISTS USER_TB;
DROP TABLE IF EXISTS PROJECT_TB;

create table USER_TB(
   USER_ID INT NOT NULL,
   FULL_NAME VARCHAR(20) DEFAULT NULL,
   PASSWORD VARCHAR(20) DEFAULT NULL,
   PASSWORD_FLAG TINYINT(1) DEFAULT NULL,
   ROLE VARCHAR(1) default NULL,
   IS_ENABLE TINYINT(1) DEFAULT NULL,
   CREATED_DATE TIMESTAMP DEFAULT NOW(),
   UPDATED_DATE TIMESTAMP(6),	
   CREATED_BY VARCHAR(20) DEFAULT NULL,
   UPDATED_BY VARCHAR(20) DEFAULT NULL,
   PRIMARY KEY (USER_ID)
);

create table PROJECT_TB(
   PROJECT_ID INT NOT NULL,
   PROJECT_NUM VARCHAR(20) DEFAULT NULL,
   PROJECT_NAME VARCHAR(20) DEFAULT NULL,
   START_DATE TIMESTAMP(6) DEFAULT NULL,
   END_DATE TIMESTAMP(6) DEFAULT NULL,
   T_EST_EFF INT DEFAULT 0,
   DESIGN_EFF INT DEFAULT 0,
   BUILD_EFF INT DEFAULT 0,
   SIT_EFF INT DEFAULT 0,
   UAT_EFF INT DEFAULT 0,
   IMPL_EFF INT DEFAULT 0,
   IS_ACTIVE TINYINT(1) DEFAULT NULL,
   IS_ENABLE TINYINT(1) DEFAULT NULL,
   CREATED_DATE TIMESTAMP DEFAULT NOW(),
   UPDATED_DATE TIMESTAMP(6),	
   CREATED_BY VARCHAR(20) DEFAULT NULL,
   UPDATED_BY VARCHAR(20) DEFAULT NULL,
   PRIMARY KEY (PROJECT_ID)
);

create table EFFORTS_TB(
   EFFORT_ID INT NOT NULL,
   PROJECT_ID INT NOT NULL,
   USER_ID INT NOT NULL,
   EFFORT_DATE TIMESTAMP(6),
   EFFORT_TYPE VARCHAR(20) DEFAULT NULL,
   EFFORT_HRS INT DEFAULT 0,
   CREATED_DATE TIMESTAMP DEFAULT NOW(),
   UPDATED_DATE TIMESTAMP(6),	
   CREATED_BY VARCHAR(20) DEFAULT NULL,
   UPDATED_BY VARCHAR(20) DEFAULT NULL,
   PRIMARY KEY (EFFORT_ID),
   FOREIGN KEY (PROJECT_ID) REFERENCES PROJECT_TB(PROJECT_ID),
   FOREIGN KEY (USER_ID) REFERENCES USER_TB(USER_ID)
);
